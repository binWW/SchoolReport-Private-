# markdown

## 背景
 - 上海其寓工程有限公司，一直致力于上海商业空间的设计规划、装饰工程施工承包，积累了以上海地区的甲A写字楼和工业厂房为核心的丰富的资源和力量。该公司希望能够更好的向客户展示设计效果，决定开发一套虚拟现实（Virtual Reality）环境下的支持多人在线的设计成果展示系统，将展示方式从原先的屏幕端的平面展示拓展至虚拟空间中的立体展示。
 - 上海其寓工程有限公司是专业从事研发设计、制造、加工、销售和服务为一体的大型综合型企业，公司本着以客户为中心的服务遵旨，全面考虑并满足客户之需求，真诚向客户及社会承诺产品环保与安全，并以超越客户需求为服务目标。  
 - 虚拟现实技术是一种可以创建和体验虚拟世界的计算机仿真系统，它利用计算机生成一种模拟环境，是一种多源信息融合的、交互式的三维动态视景和实体行为的系统仿真使用户沉浸到该环境中。
 - 虚拟现实技术是仿真技术的一个重要方向，是仿真技术与计算机图形学人机接口技术多媒体技术传感技术网络技术等多种技术的集合，是一门富有挑战性的交叉技术前沿学科和研究领域。虚拟现实技术(VR)主要包括模拟环境、感知、自然技能和传感设备等方面。模拟环境是由计算机生成的、实时动态的三维立体逼真图像。感知是指理想的VR应该具有一切人所具有的感知。除计算机图形技术所生成的视觉感知外，还有听觉、触觉、力觉、运动等感知，甚至还包括嗅觉和味觉等，也称为多感知。自然技能是指人的头部转动，眼睛、手势、或其他人体行为动作，由计算机来处理与参与者的动作相适应的数据，并对用户的输入作出实时响应，并分别反馈到用户的五官。传感设备是指三维交互设备。
 - 在设计行业领域，虚拟现实（VR）/增强现实（AR）显示正在逐渐流行起来。从前的设计效果展示方式大多是在普通的投影屏幕，甚至是在普通的电脑屏幕上进行展示，只能展示有限的设计效果，客户很难直观的感受到完整的设计，并且展示过程中客户的参与感较低。利用新型的虚拟现实显示技术来进行设计展示，例如室内装潢设计展示，客户能够完完全全的置身于所设计的虚拟环境之中，能够直观的从360度方向体验设计效果，并且在虚拟环境中，客户可以在范围内随意走动，仔细观察感兴趣的区域/设计，大大提升客户参与度，更能极大的提升展示效果，最终提升客户满意度。  
 - 虚拟现实技术在建筑行业存在哪些意义呢?改善建筑设计，建筑设计需要一个科学、严谨的过程，在对建筑体进行科学设计时要不断的对其可行性进行分析，并加以修改，以免在施工过程中由于设计而出现工程问题。通过虚拟现实系统可以为我国在建筑设计时进行评价，如果分析过程中发现设计中出现的缺陷，也可以使用系统模拟出不同的解决方案，这在一定程度上也可以降低成本，完善设计方案。设计的数字模型信息可以数据链的方式传递到后面的各个设计环节，直到最终形成BIM数据并指导建设和管理，提高效率，减少数据转译过程中的错误。
 - 荷兰的虚拟现实技术起步较快，Eindhoven大学的Calibre研究院已用虚拟现实技术进行设计和咨询，他们开发的软件包由一组类CAD的函数组成，称为CAAD软件，为建筑结构的创建、修改和可视化提供了工具包，它支持Auto CAD DXF文件的输入输出， 而且能够用于虚拟环境中增加动画和对象的动态行为。已用该系统模型化了一座小城市，具体目标是在河中小岛上设计一栋博物馆。这座城市由好几百栋建筑物组成，坐落在河边斜坡上，可以俯瞰小岛。首先，数字化该城市的地图，创建基本Auto CAD模型;其次，按真 实三维位置安排每栋建筑物，同时也考虑山坡的轮廓;再次，加上建筑细节，如门框和窗框设计，以便标准地表现该城市的美学特征。该应用实例让人们领略了该领域和他们所取得的成果。
 - 1.虚拟现实技术在建筑物的设计是受一系列因素所影响的，既包括设计者的知识水平和生活阅历也受其设计经验和空间思维等的限制，同一件建筑设计品，不同的设计者在外观和艺术审美上也是不尽相同的，但是通过利用虚拟现实的技术可以以三维 的形式通过用户的可听可视可触的感官，一方面能使设计者更加有效的发挥其设计的灵感也能让客户在身临其境中提出自己的一些看法和观点，为设计工作提供便利，也节省了时间和人力资源，有提高建筑是优化设计的目的。

 - 2.而对于任何一项建筑工程来说，规划工作是非常重要的想，需要考虑地形地质、气候气象、等诸多的因素，但是在现行的规划工作的所用的数据库存在着很大的缺陷，例如规划信息的存储和查询系统不够完善，规划的辅助表现集成系统科技化程度低，其主要的表现形式还停留在二维图片上，且数字化程度高但可视化水平低。那么虚拟实现技术的应用就会大大的让建筑规划业更加的高效和合理，不但可以轻松的得到必要的数据而且还能清楚的看到与建筑相关的地形和实际情况。

 - 3.施工领域作为建筑领域很重要的一个组成部分，虚拟现实技术的应用也显得尤为突出，比如在大型的土方挖运项目的设计时可以通过虚拟实现技术来精确的计算出挖土机的频率和运土的汽车的最佳匹配从而大大的提高了其施工的效率。由此可知建筑机械的在建筑设计的施工阶段是相当重要的，但在相当一段时间内人们并未认识到这一影响因素，就目前不断的进步和发展的科技而言，虚拟现实技术也慢慢被更多的人所接收，通过三维动画的演示和表现一方面最大限度的提升了建筑机械的功能和效率另一方面有使得机械的使用更加的简单易操作。从而大大的提高虚拟现实技术在在建筑施工领域的运用和发展
 - 由于研究生期间接触过虚拟现实应用开发，因此计划在上海其寓工程有限公司的进行为期六个多月的研究生专业实习。一方面能够将在校学习到的知识与技能学以致用，锻炼专业技能水平，另一方面，也能够参与公司日常工作，锻炼沟通能力与项目能力，对工作所需要的技能和知识有提前的储备。

## lua 脚本语言
    Lua  是一个小巧的脚本语言。是巴西里约热内卢天主教大学（Pontifical Catholic University of Rio de Janeiro）里的一个研究小组，由Roberto Ierusalimschy、Waldemar Celes 和 Luiz Henrique de Figueiredo所组成并于1993年开发。 其设计目的是为了嵌入应用程序中，从而为应用程序提供灵活的扩展和定制功能。Lua由标准C编写而成，几乎在所有操作系统和平台上都可以编译，运行。Lua并没有提供强大的库，这是由它的定位决定的。所以Lua不适合作为开发独立应用程序的语言。Lua 有一个同时进行的JIT项目，提供在特定平台上的即时编译功能。
    Lua脚本可以很容易的被C/C++ 代码调用，也可以反过来调用C/C++的函数，这使得Lua在应用程序中可以被广泛应用。不仅仅作为扩展脚本，也可以作为普通的配置文件，代替XML,ini等文件格式，并且更容易理解和维护。 Lua由标准C编写而成，代码简洁优美，几乎在所有操作系统和平台上都可以编译，运行。 一个完整的Lua解释器不过200k，在目前所有脚本引擎中，Lua的速度是最快的。这一切都决定了Lua是作为嵌入式脚本的最佳选择。
---
 - 特性  
   - 轻量级
    轻量级Lua语言的官方版本只包括一个精简的核心和最基本的库。这使得Lua体积小、启动速度快，从而适合嵌入在别的程序里。5.0.2版的Lua的内核小于120KB，而Python的内核大约860KB，Perl的内核大约1.1MB。[3] 
    - 可扩展
    可扩展 Lua并不象其它许多"大而全"的语言那样，包括很多功能，比如网络通讯、图形界面等。但是Lua提供了非常易于使用的扩展接口和机制：由宿主语言(通常是C或C++)提供这些功能，Lua可以使用它们，就像是本来就内置的功能一样。
    - 其它特性
    Lua还具有其它一些特性：同时支持面向过程(procedure-oriented)编程和函数式编程(functional programming)；自动内存管理；只提供了一种通用类型的表（table），用它可以实现数组，哈希表，集合，对象；语言内置模式匹配；闭包(closure)；函数也可以看做一个值；提供多线程（协同进程 [4]  ，并非操作系统所支持的线程）支持；通过闭包和table可以很方便地支持面向对象编程所需要的一些关键机制，比如数据抽象，虚函数，继承和重载等。
## 多线程
    多线程（英语：multithreading），是指从软件或者硬件上实现多个线程并发执行的技术。具有多线程能力的计算机因有硬件支持而能够在同一时间执行多于一个线程，进而提升整体处理性能。具有这种能力的系统包括对称多处理机、多核心处理器以及芯片级多处理（Chip-level multithreading）或同时多线程（Simultaneous multithreading）处理器。[1]  在一个程序中，这些独立运行的程序片段叫作“线程”（Thread），利用它编程的概念就叫作“多线程处理（Multithreading）”。具有多线程能力的计算机因有硬件支持而能够在同一时间执行多于一个线程，进而提升整体处理性能。
### 优点
 - 使用线程可以把占据时间长的程序中的任务放到后台去处理
 - 用户界面可以更加吸引人，这样比如用户点击了一个按钮去触发某些事件的处理，可以弹出一个进度条来显示处理的进度
 - 程序的运行速度可能加快
 - 在一些等待的任务实现上如用户输入、文件读写和网络收发数据等，线程就比较有用了。在这种情况下可以释放一些珍贵的资源如内存占用等等。
 - 多线程技术在IOS软件开发中也有举足轻重的位置。
### nodejs + 多线程